<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgriMantra - Your Personal Farming Assistant</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-green': '#22c55e', // A vibrant green for primary actions
            'brand-dark-green': '#15803d',
            'brand-brown': '#78350f',
            'brand-bg': '#fefce8', // A warm, off-white background
            'brand-card': '#ffffff',
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        },
      },
    };
  </script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Simple animation for the recording button */
    .recording-pulse {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
      70% { box-shadow: 0 0 0 20px rgba(220, 38, 38, 0); }
      100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
    }
  </style>
</head>

<body class="bg-brand-bg font-sans text-stone-800">

  <main class="max-w-7xl mx-auto p-4 md:p-6 lg:p-8">

    <header class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-4">
        <img src="./logo.png" alt="AgriMantra Logo" class="h-16 w-auto" style="border-radius":"70%;"/>
        <div>
          <p class="text-sm text-stone-600">Your Personal Farming Assistant</p>
        </div>
      </div>
      <select id="langSelect" class="bg-white border border-stone-300 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-brand-green">
        <option value="en-IN">English</option>
        <option value="hi-IN">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
        <option value="mr-IN">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
        <option value="ta-IN">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
        <option value="te-IN">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
      </select>
    </header>

    <section class="mb-8">
        <h2 class="text-2xl font-bold text-center text-brand-brown mb-4">From Worry to Yield: The AgriMantra Effect</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-brand-card p-4 rounded-xl shadow-md text-center">
                
                <p class="mt-3 font-semibold text-lg text-red-700">Before AgriMantra</p>
                <p class="text-sm text-stone-600">Uncertainty and worry over crop diseases.</p>
            </div>
            <div class="bg-brand-card p-4 rounded-xl shadow-md text-center">
                
                <p class="mt-3 font-semibold text-lg text-brand-dark-green">After AgriMantra</p>
                <p class="text-sm text-stone-600">Confidence with instant diagnosis and solutions.</p>
            </div>
        </div>
    </section>

    <section id="disaster-alert" class="mb-6 bg-red-600 text-white p-4 rounded-xl shadow-lg hidden">
        <h2 class="font-bold text-lg">üö® Natural Disaster Alert!</h2>
        <p id="alert-message" class="mt-1">Heavy rainfall and flood possibilities expected in the Pune region in the next 48 hours. Please take necessary precautions.</p>
    </section>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      
      <div class="lg:col-span-2 flex flex-col gap-6">
        
        <div class="bg-brand-card p-5 rounded-xl shadow-md">
          <h2 class="text-xl font-bold mb-3 text-brand-brown">Ask Me Anything</h2>
          <p class="text-sm text-stone-500 mb-4">Press the button and ask about crop prices, weather, or farming techniques.</p>
          <div class="flex items-center gap-4">
            <button id="micBtn" class="flex-shrink-0 w-20 h-20 bg-red-500 text-white rounded-full flex items-center justify-center transition-transform hover:scale-105" aria-pressed="false" title="Start/Stop recording">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm5 3V4a1 1 0 10-2 0v3a1 1 0 102 0zM5 9a5 5 0 004 4.9V16h2v-2.1A5 5 0 0015 9H5z" clip-rule="evenodd" /></svg>
            </button>
            <div class="w-full bg-stone-100 rounded-lg p-3 text-stone-700 min-h-[80px]" id="transcript">Your question will appear here...</div>
          </div>
          <div id="response" class="mt-4 bg-green-50 p-4 rounded-lg hidden">
            <h3 class="font-semibold text-brand-dark-green">AgriMantra Says:</h3>
            <p id="responseText" class="text-stone-800 mt-1">‚Äî</p>
          </div>
        </div>

        <div class="bg-brand-card p-5 rounded-xl shadow-md">
            <h2 class="text-xl font-bold mb-3 text-brand-brown">Crop Disease Detection</h2>
            <p class="text-sm text-stone-500 mb-4">Upload a photo of your crop to identify diseases and get solutions.</p>
            <div id="image-uploader" class="border-2 border-dashed border-stone-300 rounded-lg p-6 text-center">
                <input type="file" id="cropImageInput" class="hidden" accept="image/*" />
                <button onclick="document.getElementById('cropImageInput').click()" class="bg-brand-green text-white font-semibold py-2 px-5 rounded-lg hover:bg-brand-dark-green transition-colors">
                    Upload Photo
                </button>
                <p id="image-filename" class="text-sm text-stone-500 mt-3">No file selected</p>
            </div>
            <div id="image-result" class="mt-4 bg-green-50 p-4 rounded-lg hidden">
                <h3 class="font-semibold text-brand-dark-green">Diagnosis Result:</h3>
                <p id="imageResultText" class="text-stone-800 mt-1">‚Äî</p>
            </div>
        </div>
      </div>
      
      <div class="flex flex-col gap-6">
        
        <div class="bg-brand-card p-5 rounded-xl shadow-md">
          <h2 class="text-xl font-bold mb-3 text-brand-brown">Government Schemes</h2>
          <div class="space-y-4">
            <div class="border-b pb-3">
              <h3 class="font-semibold text-green-700">PM-KISAN</h3>
              <p class="text-sm text-stone-600 mt-1">Income support scheme for small and marginal farmers.</p>
            </div>
            <div>
              <h3 class="font-semibold text-green-700">Fasal Bima Yojana</h3>
              <p class="text-sm text-stone-600 mt-1">Crop insurance scheme to protect against yield losses.</p>
            </div>
          </div>
        </div>

        <div class="bg-brand-card p-5 rounded-xl shadow-md">
            <h2 class="text-xl font-bold mb-3 text-brand-brown">Feedback & Queries</h2>
            <form id="feedback-form" class="space-y-4">
                <input type="email" placeholder="Your Email (Optional)" class="w-full border border-stone-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-green">
                <textarea placeholder="Type your message here..." rows="4" class="w-full border border-stone-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-green"></textarea>
                <button type="submit" class="w-full bg-brand-green text-white font-semibold py-2 px-5 rounded-lg hover:bg-brand-dark-green transition-colors">Submit</button>
            </form>
        </div>

      </div>

    </div>
  </main>

  <footer class="mt-8 text-center text-sm text-stone-600 pb-4">
    &copy; <span id="current-year"></span> Harsh. All rights reserved.
  </footer>

  <script>
    // Set current year for copyright
    document.getElementById('current-year').textContent = new Date().getFullYear();

    // --- DOM ELEMENT REFERENCES ---
    const micBtn = document.getElementById('micBtn');
    const transcriptEl = document.getElementById('transcript');
    const responseEl = document.getElementById('response');
    const responseText = document.getElementById('responseText');
    const langSelect = document.getElementById('langSelect');
    const disasterAlert = document.getElementById('disaster-alert');
    const cropImageInput = document.getElementById('cropImageInput');
    const imageFilename = document.getElementById('image-filename');
    const imageResult = document.getElementById('image-result');
    const imageResultText = document.getElementById('imageResultText');
    const feedbackForm = document.getElementById('feedback-form');

    // --- MOCK FUNCTIONALITY ---
    
    // Mock disaster alert - show it after 3 seconds for demo purposes
    setTimeout(() => {
        disasterAlert.classList.remove('hidden');
    }, 3000);

    // Image upload handler
    cropImageInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
            imageFilename.textContent = file.name;
            // In a real app, you would send this file to a server or a client-side AI model.
            // For now, we'll just show a mock result after a short delay.
            imageResultText.textContent = 'Analyzing image...';
            imageResult.classList.remove('hidden');
            setTimeout(() => {
                imageResultText.textContent = "Diagnosis: Corn Blight detected. Recommended Action: Apply a fungicide containing propiconazole. Ensure proper plant spacing for better air circulation.";
            }, 2000);
        }
    });
    
    // Feedback form handler
    feedbackForm.addEventListener('submit', (event) => {
        event.preventDefault();
        alert('Thank you for your feedback!');
        feedbackForm.reset();
    });


    // --- SPEECH RECOGNITION (WEB SPEECH API) ---
    let recognition = null;
    let isRecording = false;
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (SpeechRecognition) {
        recognition = new SpeechRecognition();
        recognition.interimResults = true;
        recognition.maxAlternatives = 1;

        recognition.onresult = (event) => {
            const text = Array.from(event.results).map(r => r[0].transcript).join('');
            transcriptEl.textContent = text;
            if (event.results[0].isFinal) {
                handleQuery(text);
            }
        };

        recognition.onend = () => {
            isRecording = false;
            micBtn.classList.remove('recording-pulse');
            micBtn.setAttribute('aria-pressed', 'false');
        };

        recognition.onerror = (event) => {
            console.error('Speech Recognition Error:', event.error);
            isRecording = false;
            micBtn.classList.remove('recording-pulse');
            micBtn.setAttribute('aria-pressed', 'false');
        };
    } else {
        transcriptEl.textContent = "Sorry, Speech Recognition is not supported in your browser.";
    }

    micBtn.addEventListener('click', () => {
        if (!recognition) return;
        
        if (!isRecording) {
            recognition.lang = langSelect.value || 'en-IN';
            recognition.start();
            isRecording = true;
            micBtn.classList.add('recording-pulse');
            micBtn.setAttribute('aria-pressed', 'true');
            transcriptEl.textContent = 'Listening...';
        } else {
            recognition.stop();
        }
    });

    // --- MOCK QUERY HANDLING ---
    function handleQuery(text) {
        const q = text.trim().toLowerCase();
        let reply = "I can help with crop diseases, weather, and schemes. Try asking 'What is the weather in Pune?' or 'Tell me about the PM-KISAN scheme'.";

        if (q.includes('weather') || q.includes('temperature')) {
            reply = "The weather in Pune is currently 28¬∞C and partly cloudy. Light showers are expected this evening.";
        } else if (q.includes('corn') || q.includes('maize')) {
            reply = "Corn, or maize, is a cereal grain. It is a staple food in many parts of the world. For best growth, it requires warm weather and well-drained soil.";
        } else if (q.includes('scheme') || q.includes('kisan')) {
            reply = "The PM-KISAN scheme provides income support of ‚Çπ6,000 per year to all landholding farmer families. You can enroll at your nearest Common Service Centre.";
        }
        
        showResponse(reply);
    }

    function showResponse(text) {
        responseEl.classList.remove('hidden');
        responseText.textContent = text;
    }
  </script>
</body>
</html>
